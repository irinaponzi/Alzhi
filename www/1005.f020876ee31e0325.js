"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1005],{1005:(x,d,s)=>{s.r(d),s.d(d,{MisDatosPageModule:()=>C});var f=s(177),c=s(4341),i=s(5150),u=s(4964),m=s(467),t=s(4438),h=s(4605);const b=[{path:"",component:(()=>{class r{constructor(n,e,o,a){this.userService=n,this.router=e,this.toastController=o,this.formBuilder=a,this.disableSubmitButton=!0,this.form=this.formBuilder.group({nombreCompleto:[""],fechaNacimiento:[""],direccion:[""],contactoNombre:[""],contactoTelefono:[""]}),this.form.valueChanges.subscribe(()=>{console.log(this.form.value),this.validarFormulario()})}ngOnInit(){this.userService.getUser().subscribe(n=>{this.currentUser=n,this.form.patchValue({nombreCompleto:this.currentUser?.name,fechaNacimiento:this.currentUser?.date||"",direccion:this.currentUser?.address||"",contactoNombre:this.currentUser?.contact?.name||"",contactoTelefono:this.currentUser?.contact?.phone||""})})}actualizarFecha(n){const e=n.target;let o=e.value.replace(/\D/g,"");o=o.substring(0,10),o.length>=8?o=o.replace(/(\d{2})(\d{2})(\d{4})/,"$1-$2-$3"):o.length>=4?o=o.replace(/(\d{2})(\d{2})/,"$1-$2-"):o.length>=2&&(o=o.replace(/(\d{2})/,"$1-"));const a=o.substring(0,2),l=parseInt(a,10);if(l<1||l>31)return console.log("D\xeda fuera de rango v\xe1lido"),void(e.value=e.value.slice(0,-1));const y=o.substring(3,5),p=parseInt(y,10);if(p<1||p>12)return console.log("Mes fuera de rango v\xe1lido"),void(e.value=e.value.slice(0,-1));const M=o.substring(6,10),g=parseInt(M,10),P=(new Date).getFullYear();if(g<1||g>P)return console.log("A\xf1o fuera de rango v\xe1lido"),void(e.value=e.value.slice(0,-1));this.form.patchValue({fechaNacimiento:o})}validarFormulario(){const{nombreCompleto:n,fechaNacimiento:e,direccion:o,contactoNombre:a,contactoTelefono:l}=this.form.value;this.disableSubmitButton=!(n&&o&&a&&l),console.log(this.disableSubmitButton),this.disableSubmitButton?console.log("la fecha no es correcta"):this.disableSubmitButton=10!==e.length}createContactData(){return{name:this.form.get("contactoNombre")?.value,phone:this.form.get("contactoTelefono")?.value}}createUserData(){return{name:this.form.get("nombreCompleto")?.value,date:this.form.get("fechaNacimiento")?.value,address:this.form.get("direccion")?.value,contact:this.createContactData()}}onSubmit(){var n=this;return(0,m.A)(function*(){n.form.invalid?yield(yield n.toastController.create({message:"Por favor, completa todos los campos.",duration:2e3,position:"bottom",color:"warning"})).present():(console.log(n.form.value),n.userService.addUser(n.createUserData()).then(function(){var e=(0,m.A)(function*(o){const a=yield n.toastController.create({message:"Los datos han sido guardados correctamente",duration:2e3,position:"bottom",color:"success"});yield a.present(),a.onDidDismiss().then(()=>{n.router.navigate(["/tabs/tab1"])})});return function(o){return e.apply(this,arguments)}}()).catch(function(){var e=(0,m.A)(function*(o){yield(yield n.toastController.create({message:o.message,duration:3e3,position:"bottom",color:"light"})).present()});return function(o){return e.apply(this,arguments)}}()))})()}static#t=this.\u0275fac=function(e){return new(e||r)(t.rXU(h.D),t.rXU(u.Ix),t.rXU(i.K_),t.rXU(c.ok))};static#o=this.\u0275cmp=t.VBU({type:r,selectors:[["app-mis-datos"]],decls:33,vars:2,consts:[["name","aperture-outline","slot","start"],[1,"formulario",3,"ngSubmit","formGroup"],[1,"ion-justify-content-center"],[1,"datos"],["id","form"],["type","text","formControlName","nombreCompleto","placeholder","Nombre y Apellido",1,"form-control"],["name","person-outline","slot","end"],["type","text","formControlName","fechaNacimiento","placeholder","dd-mm-aaaa",1,"form-control",3,"keyup"],["name","calendar-outline",1,"custom-icon"],["type","text","formControlName","direccion","placeholder","Direcci\xf3n",1,"form-control"],["name","home-outline","slot","end"],["id","contact",1,"ion-justify-content-center"],["type","text","formControlName","contactoNombre","placeholder","Nombre",1,"form-control"],["name","person-add-outline","slot","end"],["type","text","formControlName","contactoTelefono","placeholder","Tel\xe9fono",1,"form-control"],["name","call-outline","slot","end"],["id","enviar"],["type","submit",1,"buttons",3,"disabled"]],template:function(e,o){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar"),t.nrm(2,"ion-icon",0),t.j41(3,"ion-title"),t.EFF(4,"Alzhi"),t.k0s()()(),t.j41(5,"ion-content")(6,"form",1),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(7,"ion-row",2)(8,"ion-text",3),t.EFF(9,"Completa tus datos"),t.k0s()(),t.j41(10,"div",4)(11,"ion-item"),t.nrm(12,"ion-input",5)(13,"ion-icon",6),t.k0s(),t.j41(14,"ion-item")(15,"ion-input",7),t.bIt("keyup",function(l){return o.actualizarFecha(l)}),t.k0s(),t.nrm(16,"ion-icon",8),t.k0s(),t.j41(17,"ion-item"),t.nrm(18,"ion-input",9)(19,"ion-icon",10),t.k0s(),t.j41(20,"ion-row",11)(21,"ion-text"),t.EFF(22,"Agrega un contacto"),t.k0s()(),t.j41(23,"ion-item"),t.nrm(24,"ion-input",12)(25,"ion-icon",13),t.k0s(),t.j41(26,"ion-item"),t.nrm(27,"ion-input",14)(28,"ion-icon",15),t.k0s()(),t.j41(29,"div",16)(30,"ion-row",2)(31,"ion-button",17),t.EFF(32,"Guardar"),t.k0s()()()()()),2&e&&(t.R7$(6),t.Y8G("formGroup",o.form),t.R7$(25),t.Y8G("disabled",o.disableSubmitButton))},dependencies:[c.qT,c.BC,c.cb,c.j4,c.JD,i.Jm,i.W9,i.eU,i.iq,i.$w,i.uz,i.ln,i.IO,i.BC,i.ai,i.Gw],styles:["*[_ngcontent-%COMP%]{font-size:20px}ion-content[_ngcontent-%COMP%]{--background: none;background-image:url(fondo.fecaf9393e3e620e.png);background-position:center center;background-repeat:no-repeat;background-size:cover}ion-title[_ngcontent-%COMP%]{font-size:22px;padding:0;margin:5px}ion-item[_ngcontent-%COMP%], ion-input[_ngcontent-%COMP%]{align-items:last baseline;padding:10px}ion-icon[_ngcontent-%COMP%]{font-size:30px;color:#000100}.datos[_ngcontent-%COMP%]{font-size:24px}.formulario[_ngcontent-%COMP%]{padding-top:40px;padding-left:15px;padding-right:15px}#form[_ngcontent-%COMP%]{margin-top:30px}#enviar[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:5px}.buttons[_ngcontent-%COMP%]{--background: #F2D8B3;--border-radius: 40px;font-size:16px;width:100%;height:50px;margin-top:15px}.buttons[_ngcontent-%COMP%]:hover, .buttons[_ngcontent-%COMP%]:active{--background: #E0B193}a[_ngcontent-%COMP%]{color:#000100;text-decoration:none}p[_ngcontent-%COMP%]{margin:8px}#contact[_ngcontent-%COMP%]{margin-top:35px;margin-bottom:20px;font-size:20px}ion-select[_ngcontent-%COMP%]{padding-left:15px}"]})}return r})()}];let v=(()=>{class r{static#t=this.\u0275fac=function(e){return new(e||r)};static#o=this.\u0275mod=t.$C({type:r});static#e=this.\u0275inj=t.G2t({imports:[u.iI.forChild(b),u.iI]})}return r})(),C=(()=>{class r{static#t=this.\u0275fac=function(e){return new(e||r)};static#o=this.\u0275mod=t.$C({type:r});static#e=this.\u0275inj=t.G2t({imports:[f.MD,c.YN,c.X1,i.bv,v]})}return r})()}}]);