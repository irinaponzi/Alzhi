"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[75],{75:(A,g,l)=>{l.r(g),l.d(g,{Tab3PageModule:()=>T});var i=l(5150),c=l(177),d=l(4341),f=l(5553),p=l(4964),e=l(4438),m=l(4605),h=l(467);let C=(()=>{class r{constructor(n){this.userService=n,this.CancelAlarm=new e.bkB,this.selectedDate="",this.isoDate="",this.reminder={name:"",date:new Date,additionalData:""}}ngOnInit(){this.inicializarComponente()}inicializarComponente(){if("string"==typeof this.reminder.date)console.log("esta en string");else{const t=6e4*this.reminder.date.getTimezoneOffset();this.reminder.date=new Date(this.reminder.date.getTime()-t),this.isoDate=new Date(this.reminder.date).toISOString(),this.reminder.date=this.isoDate,console.log("componente inicializado")}}CancelReminder(){this.CancelAlarm.emit()}addReminder(){var n=this;return(0,h.A)(function*(){if(!n.reminder.name||!n.reminder.additionalData||!n.reminder.date)return console.error("Error: Todos los campos son obligatorios"),void(yield(yield n.userService.toastController.create({message:"Por favor, completa todos los campos",duration:3e3,position:"bottom",color:"danger"})).present());const t=new Date(n.reminder.date);t.setHours(t.getHours()+3);const a=n.userService.getUserId();null!==a?(n.reminder.date=t,n.userService.addReminder(a,n.reminder).then(()=>{n.userService.presentToast("Alarma creada correctamente!"),console.log("Reminder added successfully.")}).catch(o=>{console.error("Error adding reminder:",o)}),n.CancelReminder()):console.error("Error: User ID is null")})()}updateSelectedDate(n){const t=new Date(n.detail.value);t.setHours(t.getHours()-3),this.reminder.date=t,this.isoDate=new Date(this.reminder.date).toISOString(),this.reminder.date=this.isoDate,console.log("fecha actualizada")}static#e=this.\u0275fac=function(t){return new(t||r)(e.rXU(m.D))};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-alarm"]],outputs:{CancelAlarm:"CancelAlarm"},decls:14,vars:3,consts:[[1,"datos-titulo"],["placeholder","Nombre",3,"ngModelChange","ngModel"],[1,"datos-descripcion"],["type","text-area","placeholder","Descripcion",3,"ngModelChange","ngModel"],[1,"calendar"],[3,"ngModelChange","ionChange","ngModel"],["slot","time-label"],[1,"buttoms-container"],[1,"agregar",3,"click"],[1,"cancelar",3,"click"]],template:function(t,a){1&t&&(e.j41(0,"ion-content")(1,"ion-item",0)(2,"ion-input",1),e.mxI("ngModelChange",function(s){return e.DH7(a.reminder.name,s)||(a.reminder.name=s),s}),e.k0s()(),e.j41(3,"ion-item",2)(4,"ion-input",3),e.mxI("ngModelChange",function(s){return e.DH7(a.reminder.additionalData,s)||(a.reminder.additionalData=s),s}),e.k0s()(),e.j41(5,"div",4)(6,"ion-datetime",5),e.mxI("ngModelChange",function(s){return e.DH7(a.reminder.date,s)||(a.reminder.date=s),s}),e.bIt("ionChange",function(s){return a.updateSelectedDate(s)}),e.j41(7,"span",6),e.EFF(8,"Horario"),e.k0s()()(),e.j41(9,"div",7)(10,"ion-button",8),e.bIt("click",function(){return a.addReminder()}),e.EFF(11,"Agregar"),e.k0s(),e.j41(12,"ion-button",9),e.bIt("click",function(){return a.CancelReminder()}),e.EFF(13,"Cancelar"),e.k0s()()()),2&t&&(e.R7$(2),e.R50("ngModel",a.reminder.name),e.R7$(2),e.R50("ngModel",a.reminder.additionalData),e.R7$(2),e.R50("ngModel",a.reminder.date))},dependencies:[i.Jm,i.W9,i.A9,i.$w,i.uz,i.Je,i.Gw,d.BC,d.vS],styles:[".datos-titulo[_ngcontent-%COMP%]{margin-top:20px;margin-right:15px;font-size:24px}.datos-descripcion[_ngcontent-%COMP%]{margin-right:13px;margin-bottom:20px;font-size:24px}.calendar[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:30px 0;padding:0}.buttoms-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.agregar[_ngcontent-%COMP%]{--background: var(--ion-color-sky-tint);color:var(--ion-color-step-50);font-size:18px}.cancelar[_ngcontent-%COMP%]{--background: #d0d0d4;color:#555558;font-size:18px}"]})}return r})(),_=(()=>{class r{constructor(n,t){this.userService=n,this.alertController=t,this.reminder={id:"",name:"",date:new Date,additionalData:""}}ngOnInit(){}eliminarRecordatorio(n){var t=this;return(0,h.A)(function*(){n?yield(yield t.alertController.create({header:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar este recordatorio?",cssClass:"custom-alert",buttons:[{text:"Cancelar",role:"cancel",cssClass:"custom-alert-button",handler:()=>{console.log("Eliminaci\xf3n cancelada")}},{text:"Eliminar",cssClass:"custom-alert-button-eliminar",handler:()=>{t.userService.removeReminder(n).then(()=>console.log("Recordatorio eliminado")).catch(o=>console.error(o))}}]})).present():console.error("ID es undefined")})()}static#e=this.\u0275fac=function(t){return new(t||r)(e.rXU(m.D),e.rXU(i.hG))};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-cards"]],inputs:{reminder:"reminder"},decls:11,vars:6,consts:[["expand","full",3,"click"]],template:function(t,a){1&t&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-card-subtitle"),e.EFF(5),e.nI1(6,"date"),e.k0s()(),e.j41(7,"ion-card-content"),e.EFF(8),e.j41(9,"ion-button",0),e.bIt("click",function(){return a.eliminarRecordatorio(a.reminder.id)}),e.EFF(10,"Eliminar"),e.k0s()()()),2&t&&(e.R7$(3),e.JRh(a.reminder.name),e.R7$(2),e.JRh(e.i5U(6,3,a.reminder.date,"dd/MM/yyyy HH:mm")),e.R7$(3),e.SpI(" ",a.reminder.additionalData," "))},dependencies:[i.Jm,i.b_,i.I9,i.ME,i.HW,i.tN,c.vh],styles:["ion-button[_ngcontent-%COMP%]{--background: #f7e7d1}"]})}return r})();function b(r,u){if(1&r){const n=e.RV6();e.j41(0,"app-alarm",5),e.bIt("CancelAlarm",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.handleCancelAlarm())}),e.k0s()}}function D(r,u){if(1&r&&(e.qex(0),e.nrm(1,"app-cards",9),e.bVm()),2&r){const n=u.$implicit;e.R7$(),e.Y8G("reminder",n)}}function v(r,u){if(1&r){const n=e.RV6();e.DNE(0,D,2,1,"ng-container",6),e.j41(1,"ion-fab",7),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.AgregarNuevoRecordatorio())}),e.j41(2,"ion-fab-button"),e.nrm(3,"ion-icon",8),e.k0s()()}if(2&r){const n=e.XpG();e.Y8G("ngForOf",n.reminders)}}const M=[{path:"",component:(()=>{class r{constructor(n){this.userService=n,this.isAlarmActive=!1,this.reminders=[],this.userId=null}ngOnInit(){this.userId=this.userService.getUserId(),this.userId?this.loadReminders(this.userId):console.error("User ID is not available")}loadReminders(n){this.userService.getReminders(n).subscribe(t=>{this.reminders=t.sort((a,o)=>new Date(a.date).getTime()-new Date(o.date).getTime())})}AgregarNuevoRecordatorio(){this.isAlarmActive=!0}handleCancelAlarm(){this.isAlarmActive=!1}static#e=this.\u0275fac=function(t){return new(t||r)(e.rXU(m.D))};static#n=this.\u0275cmp=e.VBU({type:r,selectors:[["app-tab3"]],decls:9,vars:4,consts:[["showReminders",""],[3,"translucent"],["name","aperture-outline","slot","start"],[3,"fullscreen"],[3,"CancelAlarm",4,"ngIf","ngIfElse"],[3,"CancelAlarm"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["name","add-outline"],[3,"reminder"]],template:function(t,a){if(1&t&&(e.j41(0,"ion-header",1)(1,"ion-toolbar"),e.nrm(2,"ion-icon",2),e.j41(3,"ion-title"),e.EFF(4,"Recordatorios"),e.k0s()()(),e.j41(5,"ion-content",3),e.DNE(6,b,1,0,"app-alarm",4)(7,v,4,1,"ng-template",null,0,e.C5r),e.k0s()),2&t){const o=e.sdS(8);e.Y8G("translucent",!0),e.R7$(5),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngIf",a.isAlarmActive)("ngIfElse",o)}},dependencies:[i.W9,i.Q8,i.YW,i.eU,i.iq,i.BC,i.ai,c.Sq,c.bT,C,_],styles:["*[_ngcontent-%COMP%]{font-size:24px}ion-content[_ngcontent-%COMP%]{--background: none;background-image:url(fondo.fecaf9393e3e620e.png);background-position:center bottom;background-repeat:no-repeat;background-size:cover;margin-bottom:56px}ion-title[_ngcontent-%COMP%]{font-size:22px;padding:0;margin:5px}ion-icon[_ngcontent-%COMP%]{font-size:30px}ion-fab-button[_ngcontent-%COMP%]{--background: #E0B193}"]})}return r})()}];let R=(()=>{class r{static#e=this.\u0275fac=function(t){return new(t||r)};static#n=this.\u0275mod=e.$C({type:r});static#t=this.\u0275inj=e.G2t({imports:[p.iI.forChild(M),p.iI]})}return r})(),T=(()=>{class r{static#e=this.\u0275fac=function(t){return new(t||r)};static#n=this.\u0275mod=e.$C({type:r});static#t=this.\u0275inj=e.G2t({imports:[i.bv,c.MD,d.YN,R,f.h]})}return r})()}}]);